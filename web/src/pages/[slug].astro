---
import Layout from '../layouts/Layout.astro'
import { getPages, getPage } from '../utils/sanity'
import PTExtended from '../components/portabletext/PTExtended.astro'
import { urlFor } from '../utils/image'

import PageView from '../components/views/PageView.astro'

export const prerender = true

export async function getStaticPaths() {
  const posts = await getPages()
  return posts.map((page) => ({
    params: { slug: page.slug.current },
  }))
}

const { slug } = Astro.params
const props = await getPage(slug)
---

<Layout title={props.title}>
  <PageView {...props} />
</Layout>
